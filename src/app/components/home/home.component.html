<div class="home">
    <div class="home__header">
        Get Geolocation by IP
    </div>
    <div class="home__content">
        <div class="form">
            <form [formGroup]="Form">
                <label htmlFor="address">IP-address</label>
                <input type="text" formControlName="address" id="address"
                    placeholder="Введите IP адрес" pInputText>
                <p-button [disabled]="Form.invalid" label="Search"
                    (onClick)="search()"></p-button>
                <a *ngIf="downloadUrl && geoData" [href]="downloadUrl"
                    download="{{geoData.query}}.json">Download</a>
            </form>
        </div>
        <div class="table">
            <p-progressSpinner *ngIf="loading"></p-progressSpinner>
            <p-table *ngIf="geoData && !loading" [value]="[geoData]"
                [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Query</th>
                        <th>Status</th>
                        <th>Country</th>
                        <th>Country Code</th>
                        <th>Region</th>
                        <th>Region Name</th>
                        <th>City</th>
                        <th>Zip</th>
                        <th>Latitude</th>
                        <th>Longitude</th>
                        <th>TimeZone</th>
                        <th>ISP</th>
                        <th>Organization</th>
                        <th>AS</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-geolocation>
                    <tr>
                        <td>{{ geolocation.query }}</td>
                        <td>{{ geolocation.status }}</td>
                        <td>{{ geolocation.country }}</td>
                        <td>{{ geolocation.countryCode }}</td>
                        <td>{{ geolocation.region }}</td>
                        <td>{{ geolocation.regionName }}</td>
                        <td>{{ geolocation.city }}</td>
                        <td>{{ geolocation.zip }}</td>
                        <td>{{ geolocation.lat }}</td>
                        <td>{{ geolocation.lon }}</td>
                        <td>{{ geolocation.timezone }}</td>
                        <td>{{ geolocation.isp }}</td>
                        <td>{{ geolocation.org }}</td>
                        <td>{{ geolocation.as }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<p-toast></p-toast>